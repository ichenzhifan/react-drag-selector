!function e(t,n,i){function o(s,a){if(!n[s]){if(!t[s]){var d="function"==typeof require&&require;if(!a&&d)return d(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return o(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({1:[function(e,t,n){(function(n){"use strict";function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o="undefined"!=typeof window?window.React:"undefined"!=typeof n?n.React:null,r="undefined"!=typeof window?window.ReactDOM:"undefined"!=typeof n?n.ReactDOM:null,s=e("./shortcut"),a=e("./shortcut/key_code_map"),d=document.createElement("div"),l=function(e){return o.createElement("div",{className:"select-rectangle",style:e.style})},c=o.createClass({displayName:"Selection",getDefaultProps:function(){return{enable:!0,onSelectionChange:function(){}}},getInitialState:function(){return{mouseDown:!1,selecting:!1,downInSelectionItem:!1,startPoint:null,endPoint:null,startScreenPoint:null,endScreenPoint:null,appendMode:!1}},componentWillUpdate:function(){this.handleRenderSelectRectangle()},componentWillMount:function(){this.originSelectedItems=new Set,this.selectedItems=new Set,document.body.appendChild(d),s.addListener([a.ctrl],this.handleSwitchAppendMode.bind(this,!0)),s.addListener([a.shift],this.handleSwitchAppendMode.bind(this,!0)),window.addEventListener("keyup",this.handleSwitchAppendMode.bind(this,!1))},render:function(){var e=this.state,t="select-area"+(e.selecting?" selecting":"");return o.createElement("div",{ref:"selectionArea",key:"selectionArea",className:t,onMouseDown:this.handleMouseDown},this.handleRenderChildren())},componentWillReceiveProps:function(e){e.enable&&e.children.length===this.props.children.length||(this.selectedItems=new Set),this.forceUpdate()},componentWillUmmount:function(){s.removeListener([a.ctrl]),s.removeListener([a.shift]),s.removeListener([a.ctrl,a.a]),window.removeEventListener("keyup",this.handleSwitchAppendMode),r.unmountComponentAtNode(d),document.body.removeChild(d)},handleSwitchAppendMode:function(e){this.props.enable&&this.setState({appendMode:e})},handleMouseDown:function(e){if(this.props.enable){var t=this.state,n=this.refs,i={x:e.pageX,y:e.pageY},o={x:e.clientX,y:e.clientY},r=!1;for(var s in n)if("selectionArea"!==s){var a=n[s].getBoundingClientRect(),d={left:a.left,top:a.top,width:a.width,height:a.height};if(this.handleCalcBoxIntercets({top:o.y,left:o.x,width:0,height:0},d)){r=s,0===this.selectedItems.size||t.appendMode?this.selectedItems.add(s):this.selectedItems.has(s)||(this.selectedItems=new Set([s]));break}}this.setState({mouseDown:!0,downInSelectionItem:r,startPoint:i,startScreenPoint:o}),window.addEventListener("mouseup",this.handleMouseUp),window.addEventListener("mousemove",this.handleMouseMove)}},handleCalcBoxIntercets:function(e,t){return e.left<=t.left+t.width&&e.left+e.width>=t.left&&e.top<=t.top+t.height&&e.top+e.height>=t.top},handleMouseMove:function(e){var t=this.state,n=this.refs,i=(this.refs.selectionArea,t.startPoint),o=t.startScreenPoint,r={x:e.pageX,y:e.pageY},s={x:e.clientX,y:e.clientY},a={left:Math.min(i.x,r.x),top:Math.min(i.y,r.y),width:Math.abs(i.x-r.x),height:Math.abs(i.y-r.y)},d={left:Math.min(o.x,s.x),top:Math.min(o.y,s.y),width:Math.abs(o.x-s.x),height:Math.abs(o.y-s.y)};if(t.mouseDown&&!t.downInSelectionItem){for(var l in n)if("selectionArea"!==l){var c=n[l].getBoundingClientRect(),h={left:c.left,top:c.top,width:c.width,height:c.height};this.handleCalcBoxIntercets(d,h)?this.selectedItems.add(l):t.appendMode||this.selectedItems["delete"](l)}this.setState({selecting:!0,endPoint:r,endScreenPoint:s,selectBoxStyle:a})}},handleRenderSelectRectangle:function(){var e=this.state,t=e.startPoint,n=e.endPoint;if(!e.selecting||!e.mouseDown||e.downInSelectionItem)return r.unmountComponentAtNode(d),null;var i={left:Math.min(t.x,n.x),top:Math.min(t.y,n.y),width:Math.abs(t.x-n.x),height:Math.abs(t.y-n.y)};r.render(o.createElement(l,{style:i}),d)},handleRenderChildren:function(){var e=this,t=0,n={},r=this.originSelectedItems,s=this.selectedItems,a=void 0,d=o.Children.map(this.props.children,function(i){var r=o.cloneElement(i),a="selection-item"+(s.has(i.key)?" selected":"");return n[i.key]=s.has(i.key),o.createElement("div",{className:a,ref:i.key?i.key:t++,draggable:!0,onDragStart:e.handleDragStart},r)});return a=r.size>s.size?new Set([].concat(i(r)).filter(function(e){return!s.has(e)})):new Set([].concat(i(s)).filter(function(e){return!r.has(e)})),a.size&&(this.originSelectedItems=new Set(this.selectedItems),this.props.onSelectionChange(n)),d},handleDragStart:function(e){e.dataTransfer.setData("dragKeyList",this.selectedItems.size?Array.from(this.selectedItems):[this.downInSelectionItem])},handleMouseUp:function(){this.state.selecting||this.state.downInSelectionItem||(this.selectedItems=new Set),this.setState({mouseDown:!1,selecting:!1,startPoint:null,endPoint:null,downInSelectionItem:!1}),r.unmountComponentAtNode(d),window.removeEventListener("mouseup",this.handleMouseUp),window.removeEventListener("mousemove",this.handleMouseMove)}});t.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./shortcut":2,"./shortcut/key_code_map":3}],2:[function(e,t,n){"use strict";var i={},o=[],r=function(e){var t=Array.from(e);return t.sort(),t.join(",")},s=function(e,t){var n=r(e);i[n]=t},a=function(e,t){var n=r(e);i.has(n)&&(i=t?i.update(n,function(e){return e.filter(function(e){return e!==t})}):i["delete"](n))};window.addEventListener("keydown",function(e){o=Array.from(new Set([].concat(o,[e.keyCode])));var t=r(o);i.has(t)&&i.get(t).forEach(function(e){e()})}),window.addEventListener("keyup",function(e){o.pop()}),t.exports={addListener:s,removeListener:a}},{}],3:[function(e,t,n){"use strict";t.exports={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pause:19,"break":19,capsLock:20,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,window:{left:91,right:92},meta:{left:91,right:93},select:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numLock:144,scrollLock:145,semicolon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBraket:221,singleQuote:222}},{}]},{},[1]);